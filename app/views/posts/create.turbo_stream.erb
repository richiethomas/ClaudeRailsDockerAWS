<%= turbo_stream.prepend "posts_list" do %>
  <%= turbo_frame_tag dom_id(@post) do %>
    <div class="border rounded-lg p-6 bg-white shadow-sm">
      <h2 class="text-xl font-semibold mb-2">
        <%= link_to @post.title, post_path(@post), data: { turbo_frame: '_top' }, class: "text-blue-600 hover:underline" %>
      </h2>
      <p class="text-gray-600 mb-4"><%= truncate(@post.body, length: 200) %></p>
      <div class="flex gap-2 text-sm">
        <span class="<%= @post.published ? 'text-green-600' : 'text-gray-400' %>">
          <%= @post.published ? '✓ Published' : '○ Draft' %>
        </span>
        <%= link_to "Edit", edit_post_path(@post), class: "text-blue-600 hover:underline" %>
      </div>
    </div>
  <% end %>
<% end %>

<%= turbo_stream.update "new_post_form" do %>
  <%= render partial: "form", locals: { post: Post.new } %>
<% end %>